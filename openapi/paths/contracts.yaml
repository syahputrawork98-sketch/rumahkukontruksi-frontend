contracts:
  get:
    tags: [Contracts]
    summary: List contracts
    security:
      - CookieAuth: []
      - BearerAuth: []
    parameters:
      - name: projectId
        in: query
        schema:
          type: string
    responses:
      "200":
        description: Contract list
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: "../components/schemas.yaml#/Contract"
            examples:
              sample:
                value:
                  - id: ctr_001
                    projectId: prj_001
                    contractorId: sup_001
                    scope: Struktur dan finishing
                    signedAt: 2026-02-10
                    paymentSchedule:
                      - milestone: DP 30%
                        amount: 750000000
                        dueDate: 2026-03-01
      "401":
        $ref: "../components/responses.yaml#/Unauthorized"
  post:
    tags: [Contracts]
    summary: Create contract
    security:
      - CookieAuth: []
      - BearerAuth: []
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: "../components/schemas.yaml#/Contract"
          examples:
            sample:
              value:
                id: ctr_001
                projectId: prj_001
                contractorId: sup_001
                scope: Struktur dan finishing
                signedAt: 2026-02-10
                paymentSchedule:
                  - milestone: DP 30%
                    amount: 750000000
                    dueDate: 2026-03-01
    responses:
      "201":
        description: Contract created
        content:
          application/json:
            schema:
              $ref: "../components/schemas.yaml#/Contract"
            examples:
              created:
                value:
                  id: ctr_001
                  projectId: prj_001
                  contractorId: sup_001
                  scope: Struktur dan finishing
                  signedAt: 2026-02-10
                  paymentSchedule:
                    - milestone: DP 30%
                      amount: 750000000
                      dueDate: 2026-03-01
      "400":
        $ref: "../components/responses.yaml#/ValidationError"

contract_by_id:
  get:
    tags: [Contracts]
    summary: Get contract by id
    security:
      - CookieAuth: []
      - BearerAuth: []
    parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
    responses:
      "200":
        description: Contract detail
        content:
          application/json:
            schema:
              $ref: "../components/schemas.yaml#/Contract"
            examples:
              sample:
                value:
                  id: ctr_001
                  projectId: prj_001
                  contractorId: sup_001
                  scope: Struktur dan finishing
                  signedAt: 2026-02-10
                  paymentSchedule:
                    - milestone: DP 30%
                      amount: 750000000
                      dueDate: 2026-03-01
      "404":
        $ref: "../components/responses.yaml#/NotFound"

  put:
    tags: [Contracts]
    summary: Update contract by id
    security:
      - CookieAuth: []
      - BearerAuth: []
    parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: "../components/schemas.yaml#/Contract"
          examples:
            sample:
              value:
                id: ctr_001
                projectId: prj_001
                contractorId: sup_001
                scope: Struktur dan finishing (revisi)
                signedAt: 2026-02-10
                paymentSchedule:
                  - milestone: DP 30%
                    amount: 750000000
                    dueDate: 2026-03-01
    responses:
      "200":
        description: Contract updated
        content:
          application/json:
            schema:
              $ref: "../components/schemas.yaml#/Contract"
            examples:
              updated:
                value:
                  id: ctr_001
                  projectId: prj_001
                  contractorId: sup_001
                  scope: Struktur dan finishing (revisi)
                  signedAt: 2026-02-10
                  paymentSchedule:
                    - milestone: DP 30%
                      amount: 750000000
                      dueDate: 2026-03-01
      "400":
        $ref: "../components/responses.yaml#/ValidationError"
      "404":
        $ref: "../components/responses.yaml#/NotFound"

project_contracts:
  get:
    tags: [Contracts]
    summary: List contracts by project
    security:
      - CookieAuth: []
      - BearerAuth: []
    parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
    responses:
      "200":
        description: Contract list for project
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: "../components/schemas.yaml#/Contract"
            examples:
              sample:
                value:
                  - id: ctr_001
                    projectId: prj_001
                    contractorId: sup_001
                    scope: Struktur dan finishing
                    signedAt: 2026-02-10
                    paymentSchedule:
                      - milestone: DP 30%
                        amount: 750000000
                        dueDate: 2026-03-01
      "401":
        $ref: "../components/responses.yaml#/Unauthorized"
